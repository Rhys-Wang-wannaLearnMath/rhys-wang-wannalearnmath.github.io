{% include base_path %}

<meta charset="utf-8">

{% include seo.html %}

<link href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}" type="application/atom+xml" rel="alternate" title="{{ site.title }} Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- Google Fonts with optimized loading -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">

<!-- Font loading optimization -->
<style>
  /* Font face declarations for better fallback */
  @font-face {
    font-family: 'Playfair Display Fallback';
    src: local('Georgia'), local('Times New Roman'), local('serif');
    font-display: swap;
  }
  
  /* Ensure fonts load quickly */
  .sidebar {
    font-display: swap;
  }
</style>

<!-- Preload critical font files -->
<link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplay/v36/nuFvD-vYSZviVYUb_rj3ij__anPXJzDwcbmjWBN2PKdFvXDXbtXK-F2qO0isEw.woff2" as="font" type="font/woff2" crossorigin>

<!-- Font loading fallback script -->
<script>
  // Check if Google Fonts loaded successfully
  if (typeof FontFace !== 'undefined') {
    // Modern browsers with FontFace API
    const playfairFont = new FontFace('Playfair Display', 'url(https://fonts.gstatic.com/s/playfairdisplay/v36/nuFvD-vYSZviVYUb_rj3ij__anPXJzDwcbmjWBN2PKdFvXDXbtXK-F2qO0isEw.woff2)');
    
    playfairFont.load().then(function(loadedFont) {
      document.fonts.add(loadedFont);
      document.documentElement.classList.add('fonts-loaded');
    }).catch(function() {
      // Fallback to system fonts if Google Fonts fail
      document.documentElement.classList.add('fonts-failed');
    });
  } else {
    // Older browsers fallback
    setTimeout(function() {
      document.documentElement.classList.add('fonts-loaded');
    }, 3000);
  }
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/main.css">

<meta http-equiv="cleartype" content="on">